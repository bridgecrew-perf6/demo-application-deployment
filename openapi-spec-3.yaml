openapi: 3.0.0
info:
    title: ventas
    version: 1.0.0
    description: API encargada de resolver la integraciÃ³n con SAP para ventas.
servers:
    - url: ventas.tarjeta-copec-poc.svc.cluster.local
paths:
    /tarjetas-combustible:
        post:
            requestBody:
                description: Datos de entrada
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/transaccion'
                        example:
                            id: 12345
                            solicitante: 0000663287
                            numero-rollo-voucher: '000000000001'
                            fecha: '20220304'
                            hora: '71600'
                            validacion-anillo: ''
                            condicion-precio: T02
                            estado-vigencia: ''
                            firma-electronica: GE|<CAF version="1.0"><DA><RE>99520000-7</RE><RS>COPEC S.A.</RS>
                            orden-compra-cliente: '0'
                            tarjeta:
                                numero: '00120'
                                tipo: TAE
                            eds:
                                codigo: 0000010197
                            guia-despacho:
                                folio: 000010860361
                            vehiculo:
                                patente: CC 260
                                odometro: '0000000'
                                tipo: '12'
                                correlativo: '0020'
                            venta:
                                detalle:
                                    -
                                        producto:
                                            codigo: '000000000000000013'
                                            tipo: COMB
                                            precio-unitario: 878
                                        cantidad: 70
                                        unidad-de-medida: L
                                precio-total: 61460
                            entrega:
                                tipo: R
                                descripcion: '00'
                                costo-flete: 0
                required: true
            tags:
                - Operaciones
            responses:
                '202':
                    description: La solicitud se a recibido correctamente.
                default:
                    content:
                        application/problem+json:
                            schema:
                                $ref: '#/components/schemas/problem'
                    description: La solicitud no se a podido procesar por algÃºn problema.
            operationId: tarjetaCombustible
            summary: tarjetas-combustible
            description: >-
                OperaciÃ³n que permite la integraciÃ³n con SAP para registrar la venta con tarjetas TAE
                (Tarjeta de Abastecimiento en Empresa) y TCT (Tarjeta Copec de Transporte).
    /tarjetas-combustible-callback:
        post:
            requestBody:
                description: Datos de entrada
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/estado-transaccion'
                        example:
                            id: 12345
                            pedido: 0368304912
                            posicion: 10
                            comentarios: ''
                            monto-comision: 490
                            comision-flete: 0
                            descuento: 1750
                            condicion-precio: D08
                required: true
            tags:
                - Operaciones
            responses:
                '202':
                    description: La solicitud se a recibido correctamente.
                default:
                    content:
                        application/problem+json:
                            schema:
                                $ref: '#/components/schemas/problem'
                    description: La solicitud no se a podido procesar por algÃºn problema.
            summary: tarjetas-combustible-callback
            description: >-
                OperaciÃ³n que permite a SAP responder el resultado del registro de la venta  con tarjeta TAE
                o TCT.
components:
    schemas:
        transaccion:
            properties:
                id:
                    description: Identificador de la transacciÃ³n
                    type: number
                solicitante:
                    description: CÃ³digo de la persona que solicita la operaciÃ³n
                    type: string
                numero-rollo-voucher:
                    description: NÃºmero de rollo asociado al voucher emitido
                    type: string
                fecha:
                    description: Fecha de la operaciÃ³n
                    type: string
                hora:
                    description: Hora de la operaciÃ³n
                    type: string
                validacion-anillo:
                    description: Estado de la validaciÃ³n del anillo
                    type: string
                condicion-precio:
                    description: Tipo de acuerdo de precio
                    type: string
                estado-vigencia:
                    description: Estado de vigencia de la transacciÃ³n que permite anularla
                    type: string
                firma-electronica:
                    description: CÃ³digo de firma electrÃ³nica del documento legal
                    type: string
                orden-compra-cliente:
                    description: Orden de compra de los clientes fiscales
                    type: string
                tarjeta:
                    $ref: '#/components/schemas/tarjeta'
                estacion:
                    $ref: '#/components/schemas/eds'
                guia-despacho:
                    $ref: '#/components/schemas/guia-despacho'
                vehiculo:
                    $ref: '#/components/schemas/vehiculo'
                venta:
                    $ref: '#/components/schemas/venta'
                entrega:
                    $ref: '#/components/schemas/entrega'
        vehiculo:
            properties:
                patente:
                    description: Patente del vehÃ­culo
                    type: string
                odometro:
                    description: Kilometraje actual del vehÃ­culo
                    type: string
                tipo:
                    description: Tipo de vehÃ­culo
                    type: string
                correlativo:
                    description: Correlativo del vehÃ­culo del cliente
                    type: string
        tarjeta:
            properties:
                numero:
                    description: NÃºmero de tarjeta
                    type: string
                tipo:
                    description: Tipo de tarjeta
                    type: string
        eds:
            properties:
                codigo:
                    description: Identificador de una estaciÃ³n de servicio
                    type: string
        guia-despacho:
            properties:
                folio:
                    description: NÃºmero de la guÃ­a de despacho
                    type: string
        producto:
            properties:
                codigo:
                    description: CÃ³digo del producto
                    type: string
                tipo:
                    description: Tipo del producto
                    type: string
                precio-unitario:
                    description: Valor unitario del producto
                    type: number
        venta:
            properties:
                detalle:
                    type: array
                    items:
                        $ref: '#/components/schemas/detalle'
                precio-total:
                    description: Valor total de la venta
                    type: number
        detalle:
            properties:
                producto:
                    $ref: '#/components/schemas/producto'
                cantidad:
                    description: Cantidad vendida del producto
                    type: number
                unidad-de-medida:
                    description: Unidad con la que se mide el producto
                    type: string
        entrega:
            properties:
                tipo:
                    description: Tipo de entrega
                    type: string
                descripcion:
                    description: DescripciÃ³n del tipo de entrega
                    type: string
                costo-flete:
                    description: Costo del flete asociado a la operaciÃ³n si corresponde
                    type: number
        estado-transaccion:
            properties:
                id:
                    description: Identificador de la transacciÃ³n
                    type: number
                pedido:
                    description: Numero de pedido con que se registra la transacciÃ³n en SAP
                    type: string
                posicion:
                    description: PosiciÃ³n dentro del pedido
                    type: integer
                comentarios:
                    description: InformaciÃ³n del error funcional
                    type: string
                monto-comision:
                    description: ComisiÃ³n de la estaciÃ³n
                    type: number
                comision-flete:
                    description: ComisiÃ³n del flete
                    type: number
                descuento:
                    description: Monto en pesos de descuento
                    type: number
                condicion-precio:
                    description: Tipo de acuerdo de precio
                    type: string
        problem:
            type: object
            properties:
                type:
                    format: uri
                    description: |
                        An absolute URI that identifies the problem type.  When dereferenced,
                        it SHOULD provide human-readable documentation for the problem type
                        (e.g., using HTML).
                    default: 'about:blank'
                    type: string
                    example: 'https://example.com/probs/out-of-credit'
                title:
                    description: |
                        A short, summary of the problem type. Readable for engineers
                        (usually not suited for non technical stakeholders and not localized);
                        example: Service Unavailable
                    type: string
                    example: You do not have enough credit
                status:
                    format: int32
                    description: |
                        The HTTP status code generated by the origin server for this occurrence
                        of the problem.
                    maximum: 600
                    exclusiveMaximum: true
                    minimum: 100
                    type: integer
                    example: 403
                detail:
                    description: |
                        A human readable explanation specific to this occurrence of the
                        problem.
                    type: string
                    example: 'Your current balance is 30, but that costs 50.'
                instance:
                    format: uri
                    description: |
                        An absolute URI that identifies the specific occurrence of the problem.
                        It may or may not yield further information if dereferenced.
                    type: string
                    example: /account/12345/msgs/abc
    securitySchemes:
        api_key:
            type: apiKey
            name: api_key
            in: header
        basicAuth:
            scheme: basic
            type: http
security:
    - api_key: []
    - basicAuth: []
tags:
    - name: Tipo
      description: TÃ©cnica
    - name: Estado
      description: DiseÃ±o
